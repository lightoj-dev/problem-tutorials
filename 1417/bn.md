# LOJ 1417 - Forwarding Emails

প্রথমেই ধরে নেই তোমার কাছে কিছু মানুষ আছে এবং তাদের পাঠানোর জন্য কিছু মেইল দেওয়া আছে।
এখন মনেকরি, তুমি জানো তুমি প্রথম জনকে মেইল পাঠালে সে ২য় জনকে মেইল টা ফরোয়ার্ড করতে পারবে।
এখানে একজন আরেকজনকে মেইল পাঠাতে পারবে তখনই যখন তাদের মধ্যে একটা যোগাযোগ আছে।
ধরি, ১ম জন আর ২য় জনের মধ্যে যোগাযোগ আছে এবং ২য় আর ৩য় জনের মধ্যে যোগাযোগ আছে কিন্তু ১ম আর ৩য় জনের মধ্যে কোনো যোগাযোগ নেই। 
তাহলে ১ম জন ৩য় জনকে মেইল পাঠাতে গেলে ২য় জনের মাধ্যমে পাঠানো লাগবে।
এখন এই প্রবলেমে তোমাকে বলে দেওয়া থাকবে, কার সাথে কার যোগাযোগ আছে অর্থাৎ কে কাকে মেইল পাঠাতে পারবে।
তোমাকে বলতে হবে কাকে প্রথমে মেইল পাঠালে তুমি বেশি সংখ্যক মানুষের কাছে মেইল পৌঁছাতে পারবা?
আমরা একটা ছোট্ট উদাহরণ এর মাধ্যমে জিনিসটা বোঝার চেষ্টা করি। 

উদাহরণঃ 
১ ২ - ১ম জন ২য় জনকে মেইল পাঠাতে পারবে 
২ ১ - ২য় জন ১ম জনকে মেইল পাঠাতে পারবে
৫ ৩ - ৫ম জন ৩য় জনকে মেইল পাঠাতে পারবে
৩ ৪ - ৩য় জন ৪র্থ জনকে মেইল পাঠাতে পারবে
৪ ৫ - ৪র্থ জন ৫ম জনকে মেইল পাঠাতে পারবে

তাহলে এখানে আমি যদি ১ম জনকে মেইল প্রথমে পাঠায়, তাহলে সে শুধু ২য় জনকে পাঠাতে পারবে তাহলে মোট ২ জনের কাছে মেইল যাবে।
এখানে আমি যদি ২য় জনকে মেইল প্রথমে পাঠায়, তাহলে সে শুধু ১ম জনকে পাঠাতে পারবে তাহলে মোট ২ জনের কাছে মেইল যাবে।
এখানে আমি যদি ৩য় জনকে মেইল প্রথমে পাঠায়, তাহলে সে শুধু ৪র্থ ও ৫ম জনকে পাঠাতে পারবে তাহলে মোট ৩ জনের কাছে মেইল যাবে।
একইভাবে ৪র্থ ও ৫ম জনকে মেইল প্রথমে পাঠালেও মোট ৩ জনের কাছে মেইল যাবে।
অর্থাৎ সর্বোচ্চ ৩ জনের কাছে মেইল পাঠাতে পারবো এবং সেইটা ৩য়, ৪র্থ অথবা ৫ম জন যে কাওকে প্রথমে পাঠালেই হবে।
যেহেতু সর্বনিম্ন কোন ভ্যালুকে পাঠালে আমি সর্বোচ্চ সংখ্যক মানুষকে মেইল পাঠাতে পারবো বলতে হবে সেই জন্য উত্তর ৩। 

এখানে আমরা যদি সব ম্যাক্সিমাম কানেক্টেড গ্রুপ বের করতে পারি তাহলেই উত্তর হয়ে যায়। 
তাহলে ১,২ একই গ্রুপে এবং ৩,৪,৫ অন্য আরেকটি গ্রুপে হবে, যেইটা খুব সহজেই বিএফএস অথবা ডিএফএস দিয়ে বের করা যায়। 
প্রথম থেকে একটা লুপ চালিয়ে ১ম জন থেকে একটা ডিএফএস চালালে আমরা ১ ২ কে ভিজিট করে দিতে পারি তাহলে ২য় জনকে দ্বারা আমার আর ডিএফএস চালানো লাগবে না,
একই ভাবে ৩য় জনকে দিয়ে একটা ডিএফএস চালালে আমরা ৩,৪,৫ কে ভিজিট করে দিতে পারি তাহলে ৪র্থ,৫ম জনকে দ্বারা আমার আর ডিএফএস চালানো লাগবে না 
তাহলে ডিএফএস চলবে ২ বার, ১ম ও ৩য় জনকে দিয়ে। যেহেতু ৩য় জনকে দিয়ে সর্বোচ্চ সংখ্যক মানুষকে মেইল পাঠানো যায়, তাহলে সর্বশেষ উত্তর ৩।


আপনি যদি এখনও এই সমস্যায় আটকে থাকেন তবে নীচের কোডগুলি দেখুন:

### C++ 
-----
```c++

#include<bits/stdc++.h>
using namespace std;
int vis[50005],dist[50005],adjacent[50005],cnt=0;
int dfs(int uu)
{
    vis[uu]=1;
    int vv=adjacent[uu];
    if(!vis[vv])
    {
        cnt++;
        dfs(vv);
    }
    vis[uu]=0;
    return dist[uu]=cnt;

}
main()
{   
    int ts,cs=1;
    scanf("%d",&ts);
    while(ts--)
    {
        int n,u,v,mx=0,ans=0;
        scanf("%d",&n);
        for(int i=1;i<=n;i++)
        {
            scanf("%d%d",&u,&v);
            adjacent[u]=v;
        }
        memset(vis,0,sizeof(vis));
        memset(dist,-1,sizeof(dist));
        for(int i=1;i<=n; i++)
        {
            cnt=1;
            if(dist[i]==-1)
            {
                dfs(i);
                dist[i]=cnt;
            }
            if(cnt>mx)
            {
                mx=cnt;
                ans=i;
            }
        }

        printf("Case %d: %d\n",cs++,ans);
    }
}

```